{# ПЕЧАТЬ #}

{#{% set money =  0 %}#}

{#{% set products = order.order_products|json_decode %}#}

{#{% for product in products %}#}
{#    {% set money = (product.product_total * product.product_price) + money %}#}
{#{% endfor %}#}


{#{% set order_user = order.order_user|json_decode %}#}

{% set current = query|first %}

<div class="{{ app.request.headers.get('X-Requested-With') is not null ? 'd-none' }} d-print-block p-0 w-100"
        {# style="width: 850px" #}>

    <div class="d-flex w-100 align-items-center gap-2 mb-2">
        <img src="/logo.webp" style="max-height: 60px;" alt="...">
    </div>

    <div class="d-flex w-100 justify-content-between align-items-center gap-2 border-bottom mb-3">
        <div>
            <h5>Складские остатки</h5>
            {{ current.users_profile_location }}
        </div>
        <h6>{{ app.request.server.get('HOST') }}</h6>
    </div>

    <table class="table w-100 mb-2">
        <thead>
        <tr>
            <th scope="col"> Артикул
            <th scope="col"> Наименование
            <th scope="col"> Доступно
            <th scope="col"> Место
        <tbody>





        {% for card in query %}

        <tr>
            <th scope="row"> {{ card.product_article }}
            <td>
                {{ card.product_name }}

                {{ card.product_variation_value|call_twig_func(card.product_variation_reference~'_render') ~
                card.product_modification_value|call_twig_func(card.product_modification_reference~'_render') }}

                {{ card.product_offer_value|call_twig_func(card.product_offer_reference~'_render') }}

                {# Постфикс торгового предложения #}
                {{ card.product_offer_postfix }}
                {# Постфикс множественного варианта #}
                {{ card.product_variation_postfix }}
                {# Постфикс модификации #}
                {{ card.product_modification_postfix }}

            <td> {{ (card.stock_total - card.stock_reserve) }}
            <td> {{ card.stock_storage }}


                {% endfor %}

    </table>

</div>

{% if app.request.headers.get('X-Requested-With') is not null %}
    <div class="modal-dialog modal-dialog-centered" style="max-width: 620px;">

        <div class="modal-content p-3 border-bottom border-5 border-primary d-print-none">

            <div class="modal-header">
                <h5 class="modal-title">
                    {{ 'Печать складских остатков'|trans }}
                </h5>
            </div>

            <div class="modal-body">
                <h4>Печать складских остатков согласно фильтру</h4>
            </div>

            <div class="modal-footer">

                <div class="mt-3 gap-3 d-flex">
                    {# Отмена #}
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">
                        {{ 'btn.cancel'|trans({}, 'core.btn') }}
                    </button>

                    {# Печать #}
                    <button id="printer" type="button" class="btn btn-primary">

                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-printer-fill"
                             viewBox="0 0 16 16">
                            <path d="M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2H5zm6 8H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z"/>
                            <path d="M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2V7zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
                        </svg>

                        Печать
                    </button>

                </div>
            </div>

        </div>
    </div>
{% endif %}




