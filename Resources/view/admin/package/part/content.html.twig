{# ПЕЧАТЬ #}
<div class="{{ app.request.headers.get('X-Requested-With') is not null ? 'd-none' }} d-print-block p-0 w-100">

    {% set break = false %}

    {% for part, data in query %}

        {# Название продукта data.name #}
        {# Название продукта data.offer #}
        {# Название продукта data.stock #}



        {% for stickers in data %}


            {# {% if break %}
            #}{# разрыв старницы #}{#
        <div style="page-break-after: always !important;"></div>
    {% endif %} #}


            {% for sticker in stickers %}


                {#
                # Информация о продукте в упаковке
                #}

                {% if sticker.part is defined %}

                    {# QR партии #}

                    <div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="150" height="150"
                             style="height: 150px; max-height: 150px; max-width: 150px;"
                             fill="currentColor"
                             viewBox="8 8 35 35">
                            {{ sticker.part|raw }}
                        </svg>
                    </div>

                    <div><strong>{{ data.name }}</strong></div>
                    <div><strong>{{ data.offer }}</strong></div>
                    <div>

                        <strong class="h5">{{ data.total }} шт.</strong>

                        &nbsp;<small>место:</small>
                        <strong>

                            {# Место хранения #}
                            [{% for stock in data.stock|filter(v => v.storage is not empty) %}

                            {{ stock.storage }}

                            {% if loop.last != true %}, {% endif %}

                            {% endfor %}]
                        </strong>
                    </div>

                    {# разрыв старницы #}
                    <div style="page-break-after: always !important;"></div>

                {% endif %}


                {#
                # Перечисляем все стикеры маркировки продукта в упаковке
                #}

                {% if sticker is iterable %}

                    {% for sign in sticker %}

                        {% if sign.code is defined %}

                            <div class="text-center" style="max-width: 140px; max-height: 140px;">

                                <div>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="140" height="140"
                                         style="height: 140px; max-height: 140px; max-width: 200px;"
                                         fill="currentColor"
                                         viewBox="8 8 40 40">
                                        {{ sign.code|raw }}
                                    </svg>
                                </div>

                                <div>
                                    <small>{{ sign.number }}</small>
                                </div>

                                <div>
                                    <small>{{ data.name }}</small>
                                </div>
                                <div>
                                    <small>{{ data.offer }}</small>
                                </div>
                            </div>

                            {# разрыв старницы #}
                            <div style="page-break-after: always !important;"></div>

                        {% endif %}

                    {% endfor %}

                {% endif %}

            {% endfor %}




            {# QRCode партии #}{#
        {% if data.part is defined %}
            <div style="height: 140px; max-height: 140px; max-width: 200px; margin-left: 20px;">
                {{ stickers.part|raw }}
            </div>
        {% endif %}

        {% if data.code is defined %}
            <div style="height: 140px; max-height: 140px; max-width: 200px; margin-left: 20px;">
                {{ stickers.code|raw }}
            </div>
        {% endif %} #}


            {% set break = true %}

        {% endfor %}

    {% endfor %}

</div>
